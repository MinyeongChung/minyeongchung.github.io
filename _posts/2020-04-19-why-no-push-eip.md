---
layout: post
title: why no push eip
categories: [hardware]
---

i386에 의하면, 함수를 call 할 때에는 먼저 EIP를 스택에 밀어넣고, EBP를 스택에 밀어넣고, 함수를 호출하게 된다.

그런데 다음과 같이
```
push %ebp
```
코드는 분명히 존재하는데 왜 다음과 같은 코드는 존재하지 않는 것일까?

```
push %eip
```

gcc -S를 활용해서 찾아보면 알겠지만, 어셈블리어에서 EIP 는 전혀 찾아볼 수 없다. 그 이유는 다음과 같다.


함수를 호출할 때에 `call` 명령어를 사용하게 되는데, 이때 `push %eip`가 이 명령에 포함되어 있기 때문이다. 이때에 `eip`를 많이 사용하지 않는 이유는 다음과 같이 생각할 수 있다. `Eip`는 명령이 시행될 때마다 4씩 증가할 뿐이다. 즉 메모리에 있는 영역을 바로 다음 칸을 선택을 할 뿐이고, `call`을 할 때마다 `jump`를 하게 되고, 이 때에 기존에 있던 `eip`를 저장하게 된다는 것 뿐이다.
