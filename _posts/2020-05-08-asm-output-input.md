---
layout: post
title: asm output input
categories: [OS]
---

c inline asm을 사용하는 방법

```
void foo() {
	__asm__ __volatile__ ("\
		add ...;\
		sub ...;\
		mov ...;"
		::);
}
```

여기에서 __asm__은 이것이 인라인 어셈브리라는 것을 말해주고, __volatile__은 아래 써 있는 어셈블리어를 최적화하지 말고 최대한 그대로 적용해달라고 하는 것이다. 그리고 이 안에는 네 가지 내용이 들어갈 수 있다.

```
__asm__ __volatile__(<asm>:<output>:<input>:<clobber>);
```

형태로 이루어져 있다. 여기에서 <asm>은 큰 따옴표로 구성이 되어 있고, 여러 줄의 어셈블리들은 세미콜론으로 끝난다. 그리고 여러 줄로 이루어져 있기 때문에 \를 사용해서 구분해주어야 한다.

여기에서 output은 다음과 같이 쓴다. "=r"(var) 여기에서 =는 쓰기 전용이라는 뜻이다. 그리고 r은 메모리에 존재하는 값이라는 제한 조건이다.
